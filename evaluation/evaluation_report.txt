# Evaluation Report

## Data: Preambles and summaries of directives and regulations between 1989 and 2024

- Two sources of natural language data were used in the analysis.
- The first source is a policy’s preamble. This is suggested by Hix Hoyland [SOURCE], who use the preamble text but cut it off when “Adopted this directive/regulation” appears (p. 12). 
- The preambles were collected using the [CEPS EurLex dataset](https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/0EGYWY), which contains around 70k directives and regulations from 1989 to 2019. Policies post-2019 up to August 2024 were collected using the [eurlex](https://michalovadek.github.io/eurlex/) R package. This leads to a total of 74,734 policies.
- The second source is a policy’s summary. EUR-Lex provides a summary for some directives and regulations (see [this example](https://eur-lex.europa.eu/legal-content/EN/LSU/?uri=CELEX:32019L0904&qid=1719922563047)). Summaries are provided on a case-by-case basis, as described [here](https://eur-lex.europa.eu/browse/summaries.html). 1637 summaries were scraped from [eur-lex.europa.eu](https://eur-lex.europa.eu/homepage.html) using [this script](https://github.com/fabianaiolfi/eu-policy-feedback/blob/main/data_collection/eurlex_summaries.R).

## Methods
- Existing methods were implemented and then compared with two novel methods using large language models (LLMs).


### Existing Methods
- Hix Hoyland [SOURCE, p. 12] classify 100-word text segments into left, right and neutral. They then use a method described by Lowe et al (2011) [SOURCE] to turn the number of occurences into a score.

1. RoBERT Left Right
- [RoBERT classifier](https://huggingface.co/niksmer/RoBERTa-RILE) trained on the corpus of party manifestos

2. Bakker Hobolt Econ and Social
- Uses a fine-tuned [ManiBERT classifier](https://huggingface.co/niksmer/ManiBERT) to identify the Comparative Manifesto Project (CMP) policy-issue codes
- Then combined with Bakker-Hobolt’s modified CMP measures (Table 2.4., p. 38) [SOURCE] 

3. CMP Left Right
- Uses a fine-tuned [ManiBERT classifier](https://huggingface.co/niksmer/ManiBERT) to identify the Comparative Manifesto Project (CMP) policy-issue codes
- Then combined with CMP left-right dimension (Table 2.2., p. 33) [SOURCE]

- Latent Semantic Scaling (LSS)
LSS is a method for measuring the semantic similarity between documents and a set of seed words. In our case, each directive or regulation is a document and the seed words convey “typical” left-right terms. The semantic similarity between documents and seed words is calculated using word embeddings provided by [GloVe](https://nlp.stanford.edu/projects/glove/). To keep computation efficient, I use the smallest pre-trained word vectors model available (6B tokens, 400K vocab, 50 dimensions).
- [Economic seed words](https://github.com/fabianaiolfi/eu-policy-feedback/blob/main/lss/seed_words_econ_manual.yml)
- [Social seed words](https://github.com/fabianaiolfi/eu-policy-feedback/blob/main/lss/seed_words_social_manual.yml)

### LLM Methods
- The LLMs methods use two models: OpenAI’s ChatGPT 4o mini, using the OpenAI API, and Meta’s Llama 3.2 1B, using Ollama locally

#### 0-Shot
- This method asks the LLM to score a policy on a economic left-right scale of 0 to 100 based on set criteria.

Prompt
```
You are an expert in European Union policies. Answer questions and provide information based on that expertise.

[I’m going to show you a summary of an EU policy | I’m going to show you the beginning of a preamble of an EU policy.] Please score the policy on a scale of 0 to 100. 0 represents economic left-wing policies, such as government intervention in the economy, redistribution of wealth, social welfare programs, progressive taxation, regulation of markets, and support for labor rights. 100 represents economic right-wing policies such as free market capitalism, deregulation, lower taxes, privatization, reduced government spending, and individual financial responsibility. Please *only* return the score and absolutely nothing else. Here’s the [summary | preamble]:
```

#### Ranking
- This method pits two policies against each other. Two random policies are picked and shown to the LLM. The LLM then has to decide which policy is more economically left (or right), depending on a set of criteria. The “winning” policy is then flagged. Repeating this method enough times, i.e., recording many “winning” and “losing” policies, allows to implement the [Elo rating system](https://en.wikipedia.org/wiki/Elo_rating_system) in order to calcualte a score for each policy. Economically left “winning” policies receive a higher “left” score than policies that are economically left “losing”.

## Prompt for economic left using summaries
```
You are an expert in European Union policies. Answer questions and provide information based on that expertise.

I have two summaries of EU policies, and I need to determine which policy is more economically left-leaning. Please analyze the summaries based on principles commonly associated with economically left policies, such as government intervention in the economy, redistribution of wealth, social welfare programs, progressive taxation, regulation of markets, and support for labor rights.

Policy Summary 1
…

Policy Summary 2
…

Which policy is more economically left? Please answer ONLY '1' or '2', NOTHING ELSE UNDER NO CIRCUMSTANCES.
```

## Prompt for economic right using summaries
```
You are an expert in European Union policies. Answer questions and provide information based on that expertise.

I have two summaries of EU policies, and I need to determine which policy is more economically right-leaning. Please analyze the summaries based on principles commonly associated with economically right policies, such as free market capitalism, deregulation, lower taxes, privatization, reduced government spending, and individual financial responsibility.

Policy Summary 1
…

Policy Summary 2
…

Which policy is more economically right? Please answer ONLY USING THE NUMBERS '1' or '2', NOTHING ELSE UNDER NO CIRCUMSTANCES.
```


## Prompt for economic left using preambles
```
You are an expert in European Union policies. Answer questions and provide information based on that expertise.

I’m going to show you two EU policies, and I need to determine which policy is more economically left-leaning. Please analyze the beginning of the policies' preamble based on principles commonly associated with economically left policies, such as government intervention in the economy, redistribution of wealth, social welfare programs, progressive taxation, regulation of markets, and support for labor rights.

Preamble 1
…

Preamble 2
…

Which policy is more economically left? Please answer ONLY '1' or '2', NOTHING ELSE UNDER NO CIRCUMSTANCES.
```

## Prompt for economic right using preambles
```
You are an expert in European Union policies. Answer questions and provide information based on that expertise.

I’m going to show you two EU policies, and I need to determine which policy is more economically left-leaning. Please analyze the beginning of the policies' preamble based on principles commonly associated with economically right policies, such as free market capitalism, deregulation, lower taxes, privatization, reduced government spending, and individual financial responsibility

Preamble 1
…

Preamble 2
…

Which policy is more economically right? Please answer ONLY USING THE NUMBERS '1' or '2', NOTHING ELSE UNDER NO CIRCUMSTANCES.
```

## Evaluation
- Comparison with Nanou 2017
	- 1989 to 2014

- I compare the calcualted policy scores with a dataset provided by Nanou 2017 [SOURCE], which I treat as the ground truth
- Nanou 2017 provide policy scores for 5-year periods for nine broad policy areas
- In order to make the calculated scores comparable with Nanou 2017 [SOURCE], I normalise all results using z-score, assign each directive and regulation to a broad policy area based on [these criteria](https://github.com/fabianaiolfi/eu-policy-feedback/blob/main/evaluation/policy_area_moodley_subj_matter_mpolicy.R), and calcualte the average for each time period and policy area.

## Results
- I evaluate the summaries and the preambles seperately
- I apply the following evaluation metrics

- Pearson Correlation: A higher correlation between a calculated score and the ground truth suggests that the averaged calculated scores are closer to the ground truth than a lower correlation

- Correlation Scatter Plots: Each point in these plots represent an averaged score for a broad policy area in a specific time period. X-axis are the calculated scores (described in a plot’s title), y-axis is the ground truth. The diagonal gray line represents perfect correlation between the two scores. The blue line represents the trend line for the calculated score. The closer the blue and grey line converge, the closer the calculated results are to the ground truth.

- Mean Absolute Error: Average of the asbolute differences between calculated scores and ground truth. Smaller mean absolute errors indicate that the calculated values are closer to the ground truth.

- Adjusted MAE With Variance Penalties: The ground truth displays a much higher variance that the calculated scores. I thus introduce a variance penalty, which penalises score for their lack of variance. I adjust the mean absolute error by multiplying it by the inverse of the variance ratio. The variance ratio is the ratio of the variance of the ground truth to the variance of the calculated score. Calculated scores with a high variance are less penalised and thus “rewarded”. Calculated scores with a low variance are more penalised.